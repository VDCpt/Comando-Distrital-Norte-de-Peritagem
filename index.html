<!DOCTYPE html>
<html lang="pt-PT">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VDC Forensic System v11.0-FS | Comando Distrital Norte de Peritagem</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
</head>
<body>
    <!-- CONTAINER PRINCIPAL GRID -->
    <div class="forensic-container" id="mainContainer">
        
        <!-- ===== SIDEBAR DE INPUTS ===== -->
        <div class="input-sidebar">
            <h2>üîç PAR√ÇMETROS DE PER√çCIA</h2>
            
            <div class="input-group">
                <label for="caseNumber">N¬∫ Processo:</label>
                <input type="text" id="caseNumber" placeholder="EX: 1234/2024-JTR">
            </div>
            
            <div class="input-group">
                <label for="entityType">Tipo Entidade:</label>
                <select id="entityType">
                    <option value="">-- Selecione --</option>
                    <option value="SAFTPT">SAF-T PT (XML)</option>
                    <option value="DAC7">DAC-7 (CSV)</option>
                    <option value="BANK">Extrato Banc√°rio</option>
                    <option value="CUSTOM">Estrutura Personalizada</option>
                </select>
            </div>
            
            <div class="input-group">
                <label for="dataInput">Dados para An√°lise (JSON/XML/CSV):</label>
                <textarea id="dataInput" placeholder='[{"id": 1, "valor": 1500.00}, {"id": 2, "valor": -300.00}]'></textarea>
            </div>
            
            <div class="input-group">
                <label for="fileUpload">Upload de Ficheiro:</label>
                <input type="file" id="fileUpload" accept=".csv,.xml,.json,.txt">
            </div>
            
            <div class="input-group">
                <label for="timeframe">Per√≠odo Temporal:</label>
                <select id="timeframe">
                    <option value="30">√öltimos 30 dias</option>
                    <option value="90">√öltimos 90 dias</option>
                    <option value="365">√öltimos 365 dias</option>
                    <option value="custom">Personalizado</option>
                </select>
            </div>
            
            <button class="btn-primary" id="analyzeBtn" onclick="VDCSystem.startAnalysis()">
                ‚ö° INICIAR AN√ÅLISE FORENSE
            </button>
            
            <button class="btn-primary" id="exportBtn" onclick="VDCSystem.exportPDF()">
                üìÑ GERAR RELAT√ìRIO PDF
            </button>
            
            <button class="btn-primary" id="clearBtn" onclick="VDCSystem.clearAll()">
                üóëÔ∏è LIMPAR TUDO
            </button>
            
            <!-- KPIs R√°pidos -->
            <div class="input-group">
                <h3>üî¢ ESTAT√çSTICAS R√ÅPIDAS</h3>
                <div id="quickStats">
                    <p>üîç Transa√ß√µes: <span id="transactionCount">0</span></p>
                    <p>üí∞ Total: ‚Ç¨<span id="totalAmount">0.00</span></p>
                    <p>‚ö†Ô∏è Alertas: <span id="alertCount">0</span></p>
                </div>
            </div>
        </div>
        
        <!-- ===== √ÅREA DE AN√ÅLISE CENTRAL ===== -->
        <div class="analysis-area">
            <h2>üìä DASHBOARD DE AN√ÅLISE FORENSE</h2>
            
            <!-- KPIs Principais -->
            <div class="dashboard-grid">
                <div class="kpi-card">
                    <h3>üßÆ INTEGRIDADE DOS DADOS</h3>
                    <div class="chart-container">
                        <canvas id="integrityChart"></canvas>
                    </div>
                    <div id="integrityScore">Score: 0/100</div>
                </div>
                
                <div class="kpi-card">
                    <h3>üìà MOVIMENTA√á√ÉO FINANCEIRA</h3>
                    <div class="chart-container">
                        <canvas id="financialChart"></canvas>
                    </div>
                    <div id="financialTotal">Total: ‚Ç¨0.00</div>
                </div>
                
                <div class="kpi-card">
                    <h3>‚ö†Ô∏è DETEC√á√ÉO DE ANOMALIAS</h3>
                    <div class="chart-container">
                        <canvas id="anomalyChart"></canvas>
                    </div>
                    <div id="anomalyCount">Anomalias: 0</div>
                </div>
                
                <div class="kpi-card">
                    <h3>üîó CADEIA DE CUST√ìDIA</h3>
                    <div id="custodyChain">
                        <p>üÜî Hash Master: <span id="masterHashValue">N√£o calculado</span></p>
                        <p>üìÖ Timestamp: <span id="analysisTimestamp">--/--/---- --:--:--</span></p>
                        <p>üìù Documentos: <span id="documentCount">0</span></p>
                    </div>
                </div>
            </div>
            
            <!-- Tabela de Resultados -->
            <div class="results-section">
                <h3>üìã RESULTADOS DETALHADOS</h3>
                <table class="data-table" id="resultsTable">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Data</th>
                            <th>Descri√ß√£o</th>
                            <th>Valor (‚Ç¨)</th>
                            <th>Hash SHA-256</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="resultsBody">
                        <!-- Dados ser√£o inseridos via JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- ===== CONSOLA DE AUDITORIA (FUNDO) ===== -->
        <div class="audit-console">
            <div class="console-header">
                <h2>üìú CONSOLA DE AUDITORIA FORENSE</h2>
                <div class="console-controls">
                    <button onclick="VDCSystem.clearConsole()">Limpar Consola</button>
                    <button onclick="VDCSystem.exportLogs()">Exportar Logs</button>
                    <button onclick="VDCSystem.toggleAutoScroll()">Auto-scroll</button>
                </div>
            </div>
            <div class="console-output" id="auditOutput">
                [VDC v11.0-FS] Sistema iniciado em: <span id="systemTimestamp"></span><br>
                ‚ñ∫ Aguardando an√°lise de dados...
            </div>
            
            <!-- Estat√≠sticas da Consola -->
            <div class="console-stats">
                <span>üîç Entradas: <span id="logEntryCount">0</span></span>
                <span>‚ö†Ô∏è Erros: <span id="logErrorCount">0</span></span>
                <span>‚úÖ Sucessos: <span id="logSuccessCount">0</span></span>
                <span>‚è±Ô∏è √öltima atualiza√ß√£o: <span id="lastUpdate">--:--:--</span></span>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    
    <script>
        // Inicializa√ß√£o quando o DOM carregar
        document.addEventListener('DOMContentLoaded', function() {
            VDCSystem.initializeSystem();
        });
    </script>
</body>
</html>
