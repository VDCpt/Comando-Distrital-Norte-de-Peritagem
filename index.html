<!DOCTYPE html>
<html lang="pt-PT">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="VDC Forense - Sistema de Peritagem Digital v13.6 MASTER SCHEMA">
    <title>VDC FORENSE - v13.6 MASTER SCHEMA</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header class="main-header">
            <div class="brand">
                <div class="logo">VDC</div>
                <div class="brand-text">
                    <h1>VDC FORENSE</h1>
                    <span class="version-badge">v13.6 MASTER SCHEMA</span>
                </div>
            </div>
            <div class="session-info">
                <div class="session-id">SESS√ÉO: <span id="sessionId">---</span></div>
                <div class="datetime">
                    <span id="currentDate">--/--/----</span>
                    <span id="currentTime">00:00:00</span>
                </div>
            </div>
        </header>

        <div class="barrier" id="barrier">
            <div class="barrier-content">
                <div class="barrier-icon">üîí</div>
                <h2>ACESSO RESTRITO</h2>
                <p>Sistema de Peritagem Digital e Auditoria Fiscal</p>
                <div class="barrier-info">
                    <p><strong>Analista:</strong> Perito Forense Digital</p>
                    <p><strong>Entidade:</strong> Consultoria de Gest√£o e I&D</p>
                    <p><strong>Alvo:</strong> Auditoria Econ√≥mico-Financeira ¬∑ DAC7/SAF-T</p>
                </div>
                <div class="barrier-hash">
                    <span class="hash-label">HASH DA SESS√ÉO:</span>
                    <span class="hash-value" id="sessionHash">---</span>
                </div>
                <button id="btn-access" class="btn-primary">VALIDAR ACESSO E INICIAR</button>
            </div>
        </div>

        <div id="app" class="app hidden">
            <section class="metadata-section">
                <h2>METADADOS DA PER√çCIA</h2>
                <div class="metadata-grid">
                    <div class="metadata-item">
                        <label>Sujeito Passivo / Empresa:</label>
                        <input type="text" id="subjectName" placeholder="Nome da Entidade" class="input-forense">
                    </div>
                    <div class="metadata-item">
                        <label>NIPC / NIF:</label>
                        <input type="text" id="nipc" placeholder="N√∫mero de Identifica√ß√£o Fiscal" class="input-forense" maxlength="9">
                    </div>
                    <div class="metadata-item">
                        <label>Plataforma TVDE:</label>
                        <select id="platform" class="select-forense">
                            <option value="">-- Selecione a Plataforma --</option>
                            <option value="uber">Uber B.V.</option>
                            <option value="bolt">Bolt Operations O√ú</option>
                            <option value="outra">Outra Plataforma</option>
                        </select>
                        <div id="platformDetails" class="platform-details"></div>
                    </div>
                    <div class="metadata-item">
                        <label>Ano Fiscal:</label>
                        <select id="fiscalYear" class="select-forense"></select>
                    </div>
                    <div class="metadata-item">
                        <label>Per√≠odo:</label>
                        <select id="fiscalPeriod" class="select-forense">
                            <option value="Anual">Anual</option>
                            <option value="1.¬∫ Trimestre">1.¬∫ Trimestre</option>
                            <option value="2.¬∫ Trimestre">2.¬∫ Trimestre</option>
                            <option value="3.¬∫ Trimestre">3.¬∫ Trimestre</option>
                            <option value="4.¬∫ Trimestre">4.¬∫ Trimestre</option>
                            <option value="Mensal">Mensal</option>
                        </select>
                    </div>
                </div>
            </section>

            <section class="upload-section">
                <div class="upload-header">
                    <h2>FONTES DE DADOS</h2>
                    <div class="doc-counter">Documentos: <span id="docCount">0</span></div>
                </div>
                <div class="upload-area" id="dropZone">
                    <div class="upload-icon">üìÅ</div>
                    <p>Arraste ficheiros ou clique para selecionar</p>
                    <small>Formatos: PDF, CSV, XML, JSON (m√°x. 10MB)</small>
                    <input type="file" id="fileInput" multiple accept=".pdf,.csv,.xml,.json" hidden>
                </div>
                <div id="fileList" class="file-list"></div>
                <div class="upload-actions">
                    <button id="btnAnalyze" class="btn-primary">EXECUTAR CRUZAMENTOS</button>
                    <button id="btnClear" class="btn-secondary">LIMPAR DADOS</button>
                </div>
            </section>

            <section class="alerts-section" id="alertsSection" style="display: none;">
                <h2>ALERTAS DE DISCREP√ÇNCIA</h2>
                <div id="alertsContainer" class="alerts-container"></div>
            </section>

            <section class="dashboard-section">
                <h2>CRUZAMENTO ARITM√âTICO - VERDADE MATERIAL</h2>
                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-label">SAF-T (Bruto)</div>
                        <div class="card-value" id="totalSaft">0.00 ‚Ç¨</div>
                    </div>
                    <div class="card">
                        <div class="card-label">Comiss√µes (-)</div>
                        <div class="card-value" id="totalComissoes">0.00 ‚Ç¨</div>
                    </div>
                    <div class="card">
                        <div class="card-label">Proveito Real</div>
                        <div class="card-value" id="totalLiquido">0.00 ‚Ç¨</div>
                    </div>
                    <div class="card highlight">
                        <div class="card-label">DAC7 (Reportado)</div>
                        <div class="card-value" id="totalDac7">0.00 ‚Ç¨</div>
                    </div>
                    <div class="card alert-card">
                        <div class="card-label">DIVERG√äNCIA</div>
                        <div class="card-value" id="totalDivergencia">0.00 ‚Ç¨</div>
                    </div>
                </div>
            </section>

            <section class="hash-section">
                <div class="hash-container">
                    <div class="hash-label">INTEGRITY HASH (SHA-256):</div>
                    <div class="hash-value" id="integrityHash">---</div>
                </div>
            </section>

            <section class="export-section">
                <button id="btnExportPDF" class="btn-export">GERAR RELAT√ìRIO PERICIAL (PDF)</button>
            </section>

            <footer class="main-footer">
                <div class="footer-left">
                    <span>SESS√ÉO: <strong id="footerSession">---</strong></span>
                </div>
                <div class="footer-right">
                    <span>VDC FORENSE v13.6 | PERITO DIGITAL</span>
                </div>
            </footer>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
